
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Exploring the Pyomo Model &#8212; SDOM v0.0.11</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=0c446633"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user_guide/exploring_model';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SDOM Formulation" href="sdom_math_formulation.html" />
    <link rel="prev" title="Running SDOM and Understanding Outputs" href="running_and_outputs.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.0.11" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">SDOM Documentation</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="introduction.html">
    Introduction to SDOM
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="inputs.html">
    SDOM Input Data
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="running_and_outputs.html">
    Running SDOM and Understanding Outputs
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Exploring the Pyomo Model
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="sdom_math_formulation.html">
    SDOM Formulation
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../api/index.html">
    API Reference
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../api/core.html">
    Core Optimization Functions
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../api/results.html">
    Results Module
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../api/models.html">
    Model Formulations
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../api/io_manager.html">
    Data I/O Manager
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../api/utilities.html">
    Utility Functions
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../sdom_Developers_guide.html">
    GUIDELINES FOR DEVELOPING SDOM
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../sdom_publications.html">
    PUBLICATIONS AND USE CASES OF SDOM
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://github.com/Omar0902/SDOM">
    GitHub Repository
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Omar0902/SDOM" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="introduction.html">
    Introduction to SDOM
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="inputs.html">
    SDOM Input Data
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="running_and_outputs.html">
    Running SDOM and Understanding Outputs
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Exploring the Pyomo Model
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="sdom_math_formulation.html">
    SDOM Formulation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/core.html">
    Core Optimization Functions
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/results.html">
    Results Module
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/models.html">
    Model Formulations
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/io_manager.html">
    Data I/O Manager
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/utilities.html">
    Utility Functions
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../sdom_Developers_guide.html">
    GUIDELINES FOR DEVELOPING SDOM
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../sdom_publications.html">
    PUBLICATIONS AND USE CASES OF SDOM
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/Omar0902/SDOM">
    GitHub Repository
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/Omar0902/SDOM" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"></div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Exploring the Pyomo Model</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="exploring-the-pyomo-model">
<h1>Exploring the Pyomo Model<a class="headerlink" href="#exploring-the-pyomo-model" title="Link to this heading">#</a></h1>
<p>This guide explains the internal structure of the SDOM Pyomo model for advanced users and developers.</p>
<section id="model-architecture">
<h2>Model Architecture<a class="headerlink" href="#model-architecture" title="Link to this heading">#</a></h2>
<p>SDOM uses <a class="reference external" href="https://pyomo.readthedocs.io/en/stable/index.html">pyomo</a> to write the optimization model.</p>
<p>When you run</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```python
model = initialize_model(
    data,
    n_hours=n_steps,
    with_resilience_constraints=with_resilience_constraints
)
```
</pre></div>
</div>
<p>the function <code class="docutils literal notranslate"><span class="pre">initialize_model()</span></code> returns the pyomo instance of the optimization model, which in this case is stores in the variable <code class="docutils literal notranslate"><span class="pre">model</span></code>.</p>
<p>SDOM leverages on pyomo blocks to separate in different blocks the variables, parameters, expressions, constraints, etc of diferent model components. In this way, in that pyomo instance, SDOM creates the following blocks:</p>
<ul class="simple">
<li><p>Core optimization Blocks (Blocks that include variables, sets and parameters)</p>
<ul>
<li><p>thermal</p></li>
<li><p>pv</p></li>
<li><p>wind</p></li>
<li><p>hydro</p></li>
<li><p>storage</p></li>
</ul>
</li>
<li><p>Blocks containing only parameters (Do not include any decision variables)</p>
<ul>
<li><p>demand</p></li>
<li><p>nuclear</p></li>
<li><p>other_renewables</p></li>
</ul>
</li>
<li><p>Optional blocks (These are created depending on the configuration provided by the user)</p>
<ul>
<li><p>imports</p></li>
<li><p>exports</p></li>
<li><p>resiliency</p></li>
</ul>
</li>
</ul>
<p>Using <code class="docutils literal notranslate"><span class="pre">pprint()</span></code> function, you’ll be able to explore model objects in a simple way. If you run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sdom</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_data</span><span class="p">,</span> <span class="n">initialize_model</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s1">&#39;./Data/scenario/&#39;</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">initialize_model</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n_hours</span><span class="o">=</span><span class="mi">8760</span><span class="p">)</span>

<span class="c1"># Access model blocks</span>
<span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>          <span class="c1"># Solar PV block</span>
<span class="n">model</span><span class="o">.</span><span class="n">wind</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>         <span class="c1"># Wind block</span>
<span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>      <span class="c1"># Storage block</span>
<span class="n">model</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>      <span class="c1"># Thermal block</span>
<span class="n">model</span><span class="o">.</span><span class="n">hydro</span><span class="o">..</span><span class="n">pprint</span><span class="p">()</span>        <span class="c1"># Hydropower block</span>
<span class="n">model</span><span class="o">.</span><span class="n">nuclear</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>      <span class="c1"># Nuclear block (parameters only)</span>
<span class="n">model</span><span class="o">.</span><span class="n">demand</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>       <span class="c1"># Demand block (parameters only)</span>
</pre></div>
</div>
<p>for example, if you run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```python
model.thermal.heat_rate.pprint()
```
</pre></div>
</div>
<p>You can obtain:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>```python
heat_rate : Size=13, Index=thermal.plants_set, Domain=Any, Default=None, Mutable=False
Key  : Value
106c :   1.0
147c :   1.0
162c :   1.0
163c :   1.0
167c :   1.0
170c :   1.0
221c :   1.0
223c :   1.0
224c :   1.0
235c :   1.0
241c :   1.0
 83c :   1.0
 98c :   1.0
```
</pre></div>
</div>
</section>
<section id="model-components">
<h2>Model Components<a class="headerlink" href="#model-components" title="Link to this heading">#</a></h2>
<section id="sets">
<h3>Sets<a class="headerlink" href="#sets" title="Link to this heading">#</a></h3>
<p>Key model sets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Hourly time set (1-based indexing)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">h</span><span class="p">))</span>  <span class="c1"># e.g., 8760</span>

<span class="c1"># VRE plant sets</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">plants_set</span><span class="p">))</span>    <span class="c1"># [&#39;101&#39;, &#39;202&#39;, &#39;303&#39;, ...]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">wind</span><span class="o">.</span><span class="n">plants_set</span><span class="p">))</span>  <span class="c1"># [&#39;501&#39;, &#39;602&#39;, ...]</span>

<span class="c1"># Storage technology sets</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">j</span><span class="p">))</span>  <span class="c1"># All storage techs: [&#39;Li-Ion&#39;, &#39;CAES&#39;, &#39;PHS&#39;, &#39;H2&#39;]</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">b</span><span class="p">))</span>  <span class="c1"># Coupled techs: [&#39;Li-Ion&#39;, &#39;PHS&#39;]</span>

<span class="c1"># Thermal unit set</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">plants_set</span><span class="p">))</span>  <span class="c1"># [&#39;GasCC_1&#39;, ...]</span>

<span class="c1"># Budget set (if using budget formulation)</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">hydro</span><span class="p">,</span> <span class="s1">&#39;budget_set&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">hydro</span><span class="o">.</span><span class="n">budget_set</span><span class="p">))</span>  <span class="c1"># [1, 2, ..., 12] for monthly</span>
</pre></div>
</div>
</section>
<section id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">#</a></h3>
<p>Access model parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># System-level parameters</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Discount rate: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Carbon-free target: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">GenMix_Target</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Time-series parameters</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hour 1 load: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">demand</span><span class="o">.</span><span class="n">ts_parameter</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hour 1 nuclear: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">nuclear</span><span class="o">.</span><span class="n">ts_parameter</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">)</span>

<span class="c1"># VRE parameters</span>
<span class="n">solar_plant</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">plants_set</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Solar plant </span><span class="si">{</span><span class="n">solar_plant</span><span class="si">}</span><span class="s2"> CAPEX: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">CAPEX_M</span><span class="p">[</span><span class="n">solar_plant</span><span class="p">]</span><span class="si">}</span><span class="s2"> $/kW&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Solar plant </span><span class="si">{</span><span class="n">solar_plant</span><span class="si">}</span><span class="s2"> capacity: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">plant_max_capacity</span><span class="p">[</span><span class="n">solar_plant</span><span class="p">]</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">)</span>

<span class="c1"># Storage parameters</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Li-Ion efficiency: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Eff&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Li-Ion&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Li-Ion E_Capex: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;E_Capex&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Li-Ion&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> $/kWh&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="variables">
<h3>Variables<a class="headerlink" href="#variables" title="Link to this heading">#</a></h3>
<p>Model decision variables:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sdom.common.utilities</span><span class="w"> </span><span class="kn">import</span> <span class="n">safe_pyomo_value</span>

<span class="c1"># VRE installed capacity (continuous variables)</span>
<span class="k">for</span> <span class="n">plant</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">plants_set</span><span class="p">:</span>
    <span class="n">capacity</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">plant_installed_capacity</span><span class="p">[</span><span class="n">plant</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Solar plant </span><span class="si">{</span><span class="n">plant</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">capacity</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">)</span>

<span class="c1"># VRE generation (continuous, hourly)</span>
<span class="n">gen_h1</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">generation</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Solar generation hour 1: </span><span class="si">{</span><span class="n">gen_h1</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">)</span>

<span class="c1"># Storage variables</span>
<span class="k">for</span> <span class="n">tech</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">j</span><span class="p">:</span>
    <span class="n">pcha</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">Pcha</span><span class="p">[</span><span class="n">tech</span><span class="p">])</span>
    <span class="n">pdis</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">Pdis</span><span class="p">[</span><span class="n">tech</span><span class="p">])</span>
    <span class="n">ecap</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">Ecap</span><span class="p">[</span><span class="n">tech</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tech</span><span class="si">}</span><span class="s2">: Pcha=</span><span class="si">{</span><span class="n">pcha</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MW, Pdis=</span><span class="si">{</span><span class="n">pdis</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MW, Ecap=</span><span class="si">{</span><span class="n">ecap</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MWh&quot;</span><span class="p">)</span>

<span class="c1"># Storage state of charge (hourly)</span>
<span class="n">soc_h100</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">SOC</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;Li-Ion&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Li-Ion SOC at hour 100: </span><span class="si">{</span><span class="n">soc_h100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MWh&quot;</span><span class="p">)</span>

<span class="c1"># Thermal capacity and generation</span>
<span class="n">thermal_cap</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">total_installed_capacity</span><span class="p">)</span>
<span class="n">thermal_gen_h1</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">thermal</span><span class="o">.</span><span class="n">generation</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;GasCC_1&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thermal capacity: </span><span class="si">{</span><span class="n">thermal_cap</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Thermal gen hour 1: </span><span class="si">{</span><span class="n">thermal_gen_h1</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="expressions">
<h3>Expressions<a class="headerlink" href="#expressions" title="Link to this heading">#</a></h3>
<p>Computed expressions (not variables):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Total installed capacity expressions</span>
<span class="n">total_solar</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">total_installed_capacity</span><span class="p">)</span>
<span class="n">total_wind</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">wind</span><span class="o">.</span><span class="n">total_installed_capacity</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total solar: </span><span class="si">{</span><span class="n">total_solar</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total wind: </span><span class="si">{</span><span class="n">total_wind</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">)</span>

<span class="c1"># Cost expressions</span>
<span class="n">solar_capex</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">capex_cost_expr</span><span class="p">)</span>
<span class="n">solar_fom</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">fixed_om_cost_expr</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Solar CAPEX: $</span><span class="si">{</span><span class="n">solar_capex</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Solar FOM: $</span><span class="si">{</span><span class="n">solar_fom</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Total generation expressions</span>
<span class="n">total_solar_gen</span> <span class="o">=</span> <span class="n">safe_pyomo_value</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">total_generation</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total solar generation: </span><span class="si">{</span><span class="n">total_solar_gen</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MWh&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="constraints">
<h3>Constraints<a class="headerlink" href="#constraints" title="Link to this heading">#</a></h3>
<p>Model constraints are organized by block:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># List all constraints</span>
<span class="k">for</span> <span class="n">constraint</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">component_objects</span><span class="p">(</span><span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">,</span> <span class="n">active</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Constraint: </span><span class="si">{</span><span class="n">constraint</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">constraint</span><span class="o">.</span><span class="n">is_indexed</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Indices: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span><span class="si">}</span><span class="s2"> constraints&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Single constraint&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Key constraint types:</p>
<ul class="simple">
<li><p><strong>Energy Balance</strong> (<code class="docutils literal notranslate"><span class="pre">system_energy_balance_rule</span></code>): Supply = Demand every hour</p></li>
<li><p><strong>Carbon Target</strong> (<code class="docutils literal notranslate"><span class="pre">GenMix_constraint</span></code>): Clean energy ≥ target × total generation</p></li>
<li><p><strong>VRE Balance</strong>: Generation ≤ CF × Capacity for each hour/plant</p></li>
<li><p><strong>Storage Dynamics</strong>: State of charge evolution constraints</p></li>
<li><p><strong>Storage Bounds</strong>: SOC within [0, Energy Capacity]</p></li>
<li><p><strong>Thermal Bounds</strong>: Generation within [Min, Max Capacity]</p></li>
<li><p><strong>Hydro Budget</strong>: Energy generation sums match budget (if applicable)</p></li>
</ul>
</section>
</section>
<section id="inspecting-the-model">
<h2>Inspecting the Model<a class="headerlink" href="#inspecting-the-model" title="Link to this heading">#</a></h2>
<section id="print-model-summary">
<h3>Print Model Summary<a class="headerlink" href="#print-model-summary" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Model statistics</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Model name: </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">pprint</span><span class="p">()</span>  <span class="c1"># Warning: very verbose for large models!</span>

<span class="c1"># Constraint counts</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tests.utils_tests</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_n_eq_ineq_constraints</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">get_n_eq_ineq_constraints</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Equality constraints: </span><span class="si">{</span><span class="n">counts</span><span class="p">[</span><span class="s1">&#39;equality&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Inequality constraints: </span><span class="si">{</span><span class="n">counts</span><span class="p">[</span><span class="s1">&#39;inequality&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="examine-specific-constraints">
<h3>Examine Specific Constraints<a class="headerlink" href="#examine-specific-constraints" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyomo.environ</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pyo</span>

<span class="c1"># Energy balance constraint (one per hour)</span>
<span class="n">balance_h1</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">system_energy_balance</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Balance constraint hour 1: </span><span class="si">{</span><span class="n">balance_h1</span><span class="o">.</span><span class="n">expr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># GenMix constraint</span>
<span class="n">genmix</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">GenMix_constraint</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;GenMix constraint: </span><span class="si">{</span><span class="n">genmix</span><span class="o">.</span><span class="n">expr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Storage SOC dynamics (example for hour 1, Li-Ion)</span>
<span class="k">if</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Li-Ion&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">storage_charge_discharge_dynamics</span><span class="p">:</span>
    <span class="n">dynamics</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">storage_charge_discharge_dynamics</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;Li-Ion&#39;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Storage dynamics constraint: </span><span class="si">{</span><span class="n">dynamics</span><span class="o">.</span><span class="n">expr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="display-variable-bounds">
<h3>Display Variable Bounds<a class="headerlink" href="#display-variable-bounds" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check variable bounds</span>
<span class="k">for</span> <span class="n">tech</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">j</span><span class="p">:</span>
    <span class="n">var</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">Pcha</span><span class="p">[</span><span class="n">tech</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">tech</span><span class="si">}</span><span class="s2"> Pcha bounds: [</span><span class="si">{</span><span class="n">var</span><span class="o">.</span><span class="n">lb</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">var</span><span class="o">.</span><span class="n">ub</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
    
<span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">h</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]:</span>  <span class="c1"># First 5 hours</span>
    <span class="n">var</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">generation</span><span class="p">[</span><span class="n">h</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Solar gen hour </span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s2"> bounds: [</span><span class="si">{</span><span class="n">var</span><span class="o">.</span><span class="n">lb</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">var</span><span class="o">.</span><span class="n">ub</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="model-modifications">
<h2>Model Modifications<a class="headerlink" href="#model-modifications" title="Link to this heading">#</a></h2>
<section id="changing-parameters-between-runs">
<h3>Changing Parameters Between Runs<a class="headerlink" href="#changing-parameters-between-runs" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load data and initialize model once</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">load_data</span><span class="p">(</span><span class="s1">&#39;./Data/scenario/&#39;</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">initialize_model</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n_hours</span><span class="o">=</span><span class="mi">8760</span><span class="p">)</span>

<span class="c1"># Change GenMix_Target (mutable parameter)</span>
<span class="n">model</span><span class="o">.</span><span class="n">GenMix_Target</span> <span class="o">=</span> <span class="mf">0.90</span>  <span class="c1"># 90% clean energy</span>
<span class="n">results_90</span> <span class="o">=</span> <span class="n">run_solver</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">solver_config</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">GenMix_Target</span> <span class="o">=</span> <span class="mf">0.95</span>  <span class="c1"># 95% clean energy</span>
<span class="n">results_95</span> <span class="o">=</span> <span class="n">run_solver</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">solver_config</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">GenMix_Target</span> <span class="o">=</span> <span class="mf">0.99</span>  <span class="c1"># 99% clean energy</span>
<span class="n">results_99</span> <span class="o">=</span> <span class="n">run_solver</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">solver_config</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="adding-custom-constraints">
<h3>Adding Custom Constraints<a class="headerlink" href="#adding-custom-constraints" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyomo.environ</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pyo</span>

<span class="c1"># Add minimum wind capacity constraint</span>
<span class="k">def</span><span class="w"> </span><span class="nf">min_wind_capacity_rule</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">wind</span><span class="o">.</span><span class="n">total_installed_capacity</span> <span class="o">&gt;=</span> <span class="mi">10000</span>  <span class="c1"># 10 GW minimum</span>

<span class="n">model</span><span class="o">.</span><span class="n">min_wind_constraint</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">rule</span><span class="o">=</span><span class="n">min_wind_capacity_rule</span><span class="p">)</span>

<span class="c1"># Add maximum solar/wind ratio</span>
<span class="k">def</span><span class="w"> </span><span class="nf">max_solar_wind_ratio_rule</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">total_installed_capacity</span> <span class="o">&lt;=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">model</span><span class="o">.</span><span class="n">wind</span><span class="o">.</span><span class="n">total_installed_capacity</span>

<span class="n">model</span><span class="o">.</span><span class="n">max_ratio_constraint</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">rule</span><span class="o">=</span><span class="n">max_solar_wind_ratio_rule</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="debugging-model-issues">
<h2>Debugging Model Issues<a class="headerlink" href="#debugging-model-issues" title="Link to this heading">#</a></h2>
<section id="check-for-infeasibility">
<h3>Check for Infeasibility<a class="headerlink" href="#check-for-infeasibility" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyomo.util.infeasible</span><span class="w"> </span><span class="kn">import</span> <span class="n">log_infeasible_constraints</span>

<span class="c1"># After failed solve</span>
<span class="n">results_list</span><span class="p">,</span> <span class="n">best_result</span><span class="p">,</span> <span class="n">solver_result</span> <span class="o">=</span> <span class="n">run_solver</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">solver_config</span><span class="p">)</span>

<span class="k">if</span> <span class="n">solver_result</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">termination_condition</span> <span class="o">!=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">TerminationCondition</span><span class="o">.</span><span class="n">optimal</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model is infeasible or suboptimal&quot;</span><span class="p">)</span>
    <span class="n">log_infeasible_constraints</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="validate-model-construction">
<h3>Validate Model Construction<a class="headerlink" href="#validate-model-construction" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check that variables are defined</span>
<span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="p">,</span> <span class="s1">&#39;generation&#39;</span><span class="p">),</span> <span class="s2">&quot;Solar generation variable missing&quot;</span>
<span class="k">assert</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="p">,</span> <span class="s1">&#39;SOC&#39;</span><span class="p">),</span> <span class="s2">&quot;Storage SOC variable missing&quot;</span>

<span class="c1"># Check that sets are populated</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">pv</span><span class="o">.</span><span class="n">plants_set</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;No solar plants loaded&quot;</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">j</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;No storage technologies&quot;</span>

<span class="c1"># Check parameter values</span>
<span class="k">assert</span> <span class="n">model</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Discount rate must be positive&quot;</span>
<span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">model</span><span class="o">.</span><span class="n">GenMix_Target</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;GenMix_Target out of range&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-direct-pyomo-operations">
<h2>Advanced: Direct Pyomo Operations<a class="headerlink" href="#advanced-direct-pyomo-operations" title="Link to this heading">#</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyomo.environ</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pyo</span>

<span class="c1"># Write model to file</span>
<span class="n">model</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;sdom_model.lp&#39;</span><span class="p">,</span> <span class="n">io_options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;symbolic_solver_labels&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>

<span class="c1"># Get solver results details</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Solver status: </span><span class="si">{</span><span class="n">solver_result</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Termination condition: </span><span class="si">{</span><span class="n">solver_result</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">termination_condition</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Solve time: </span><span class="si">{</span><span class="n">solver_result</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">time</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

<span class="c1"># Access dual values (shadow prices) if solver supports</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">solver_result</span><span class="p">,</span> <span class="s1">&#39;problem&#39;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Objective value: </span><span class="si">{</span><span class="n">solver_result</span><span class="o">.</span><span class="n">problem</span><span class="o">.</span><span class="n">lower_bound</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Best bound: </span><span class="si">{</span><span class="n">solver_result</span><span class="o">.</span><span class="n">problem</span><span class="o">.</span><span class="n">upper_bound</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="model-formulation-files">
<h2>Model Formulation Files<a class="headerlink" href="#model-formulation-files" title="Link to this heading">#</a></h2>
<p>The model formulation is split across multiple files in <code class="docutils literal notranslate"><span class="pre">src/sdom/models/</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">formulations_system.py</span></code>: Objective function and system constraints</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formulations_vre.py</span></code>: Solar and wind variables/constraints</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formulations_storage.py</span></code>: Storage variables/constraints</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formulations_thermal.py</span></code>: Thermal unit variables/constraints</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formulations_hydro.py</span></code>: Hydropower constraints</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">formulations_imports_exports.py</span></code>: Cross-border trade</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models_utils.py</span></code>: Helper functions for expressions and constraints</p></li>
</ul>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../api/index.html"><span class="std std-doc">View API documentation</span></a></p></li>
<li><p><a class="reference external" href="https://github.com/Omar0902/SDOM">Explore source code on GitHub</a></p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="running_and_outputs.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Running SDOM and Understanding Outputs</p>
      </div>
    </a>
    <a class="right-next"
       href="sdom_math_formulation.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">SDOM Formulation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-architecture">Model Architecture</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-components">Model Components</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sets">Sets</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parameters">Parameters</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables">Variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#expressions">Expressions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#constraints">Constraints</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inspecting-the-model">Inspecting the Model</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#print-model-summary">Print Model Summary</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examine-specific-constraints">Examine Specific Constraints</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#display-variable-bounds">Display Variable Bounds</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-modifications">Model Modifications</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-parameters-between-runs">Changing Parameters Between Runs</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-custom-constraints">Adding Custom Constraints</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#debugging-model-issues">Debugging Model Issues</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#check-for-infeasibility">Check for Infeasibility</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#validate-model-construction">Validate Model Construction</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#advanced-direct-pyomo-operations">Advanced: Direct Pyomo Operations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-formulation-files">Model Formulation Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#next-steps">Next Steps</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/user_guide/exploring_model.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2026, NREL SDOM Team.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>